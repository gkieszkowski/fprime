<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: GDS Custom Add-Ons</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_v2_80_80__users_guide_gds_gds-custom-addons.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">GDS Custom Add-Ons </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The HTML GUI of the GDS is built around <a href="https://vuejs.org/">Vue.js</a> components. Although fprime defines a number of existing components that can be added to a custom dashboard, some users need to build custom vue displays. If the display is purely HTML it can be done directly in the dashboard but should custom code be required, a Vue.js component needs to be created. This can be done using the add-on system.</p>
<p>The add-on system allows developers to create add-ons, register them, and then they are available for use within the custom dashboards. This gives access to all of Vue.js features for custom dashboards.</p>
<h1><a class="anchor" id="autotoc_md1276"></a>
Implementation of an Add-On</h1>
<p>An addon for fprime just adds a custom JS file under the "flask/src" directory in the Gds system. This JS file defines a Vue.js component in javascript with the HTML template and data top-level items.</p>
<p>This file is typically placed in a folder named for the addon (e.g. <code>example</code>) and the JS file is typically named <code>addon.js</code>. A quick example can be seen below.</p>
<div class="fragment"><div class="line">Vue.component(&quot;example&quot;, {</div>
<div class="line">    template: &quot;&lt;div&gt; template {{ key1 }} goes here&lt;/div&gt;&quot;,</div>
<div class="line">    data: function() {&quot;key1&quot;: &quot;HTML&quot;},</div>
<div class="line">}</div>
</div><!-- fragment --><p>The fprime data structures (Channels, Events, etc.) can be tapped into using the datastore object provided as a singleton from <code>datastore.js</code>. This singleton can be data-bound locally to receive updates as new data arrives. Sample data binding is shown below.</p>
<div class="fragment"><div class="line">// Import the datastore</div>
<div class="line">import {_datastore} from &quot;../../js/datastore.js&quot;;</div>
<div class="line"> </div>
<div class="line">Vue.component(&quot;example&quot;, {</div>
<div class="line">    // Add fprime Event count to our output template</div>
<div class="line">    template: &quot;&lt;div&gt;Event count: {{ events.length }}&lt;/div&gt;&quot;,</div>
<div class="line">    // Create local databinding from _datastore.events to events</div>
<div class="line">    data: function() {&quot;events&quot;: _datastore.events},</div>
<div class="line">}</div>
</div><!-- fragment --><p>Finally, most add-ons will provide a dashboard showing off the addon and usage therein. A very basic dashboard can be seen below. The name of the component becomes the HTML tag available in the dashboard. The dashboard file should be an XML file and is usually placed in the same directory as the above JS file.</p>
<div class="fragment"><div class="line">&lt;dashboard-box title=&quot;Example&quot; border-color=&quot;black&quot;&gt;</div>
<div class="line">    &lt;example&gt;&lt;/example&gt;</div>
<div class="line">&lt;/dashboard-box&gt;</div>
</div><!-- fragment --><p>The last step is to import the addon in the <code>enabled.js</code> file found in the <code>addons/</code> directory. See below.</p>
<div class="fragment"><div class="line">import &quot;./example/addon.js&quot;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1277"></a>
Vue.js Tips</h1>
<p>Although this documentation is not intended to give a full account of how to use <a href="https://vuejs.org/">Vue.js</a>, it will provide a few tips.</p>
<ol type="1">
<li>Always define the HTML template with a single child element</li>
<li><code>data</code> should be a function returning an object. This allows the component to be reused.</li>
<li>Choose a unique component name.</li>
<li>Vue.js usually runs in debug mode allowing for issues to appear in the JavaScript console.</li>
</ol>
<p>Available data from <code>_datastore</code> is described in the following table</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Item </th><th class="markdownTableHeadNone">Type </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">events </td><td class="markdownTableBodyNone">list </td><td class="markdownTableBodyNone">List of events received  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">channels </td><td class="markdownTableBodyNone">dict </td><td class="markdownTableBodyNone">Channel id to last received reading  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">upfiles </td><td class="markdownTableBodyNone">list </td><td class="markdownTableBodyNone">List of uplinked file objects  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">downfiles </td><td class="markdownTableBodyNone">list </td><td class="markdownTableBodyNone">List of downlinked file objects  </td></tr>
</table>
<p>A full example can be seen in the addons/image-display folder. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
