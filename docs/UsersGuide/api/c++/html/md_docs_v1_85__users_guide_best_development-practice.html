<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Recommended F′ Development Process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_v1_85__users_guide_best_development-practice.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Recommended F′ Development Process </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this guide is to layout the standard F´ development process. This is the process used by most developers who use F´ and, as such, many of the F´ tools are written to support the stages of the process. This guild will walk through each step in this process.</p>
<p>The process:</p><ol type="1">
<li><a href="#high-level-design">High Level Design</a>: Draft high level requirements and architecture.</li>
<li><a href="#setup-deployment">Setup Deployment</a>: Setup project F´ deployment</li>
<li><a href="#develop-ports-and-components">Develop Components</a>: Create individual project components<ul>
<li>3.1 <a href="#design-and-requirements">Design and Requirements</a>: Draft component requirements and interfaces</li>
<li>3.2 <a href="#creating-a-port">Creating a Port</a>: Implement component interfaces</li>
<li>3.3 <a href="#creating-a-component-definition">Creating a Component Definition</a>: Create initial mockup of component</li>
<li>3.4 <a href="#component-Implementation">Component Implementation</a>: Implement component behavior</li>
<li>3.5 <a href="#component-unit-testing">Component Unit Testing</a>: Test and verify component behavior</li>
</ul>
</li>
<li><a href="#assemble-topology">Assemble Topology</a>: Compose a F´ deployment from individual components</li>
<li><a href="#integration-testing">Integration Testing</a>: Verify high-level project behaviors</li>
</ol>
<h1><a class="anchor" id="autotoc_md168"></a>
High Level Design</h1>
<p>The first step of the development process is to establish the high-level design for the project. This involves specifying system-level requirements and a block diagram that represents the key system functionality. Once complete the project should break this functionality into discreet units of functionality that represent the system. In addition, the interface between these units should be defined. The units of functionality are Components and the interfaces are further broken down into discrete call or actions through that interface. These are F´ ports. The full design of the system of components and ports is the Topology. See: ../user/port-comp-top.md "Ports Components and
Topologies"</p>
<p>Next, the project should review the components provided by the F´ framework to see what functionality can be inherited for free. This usually consists of the basic command and data handling components, the <a class="el" href="namespace_os.html">Os</a> layer, drivers, and other <a class="el" href="namespace_svc.html">Svc</a> components. Where possible, these components should be used as-is to support a project to minimize extra work, but these may be cloned-and-owned if they fall short of project requirements.</p>
<p>The project now has a list of what components they must provide, and what they will inherit.</p>
<h1><a class="anchor" id="autotoc_md169"></a>
Setup Deployment</h1>
<p>The next step for most projects is to prepare for development. This means getting enough of a deployment setup such that the developers can be assigned components and ports to implement, and test within a working deployment.</p>
<p>There are two options for creating a deployment:</p>
<p>You can create an in-tree deployment, where a deployment is created within the F´ git repository. This is convenient and requires minimal setup, but placing your code within the F´ source tree can make it harder to update F´ in the future if the project wants to take advantage of future bug fixes and features. To create a in-tree deployment, the <a class="el" href="namespace_ref.html">Ref</a> application can be copied and used as a starting point.</p>
<p>Another option is creating an standalone deployment, where the deployment is setup by itself and points to a F´ installation. This requires more upfront work to setup, but provides the benefit of separating mission code from F´ framework code.</p>
<p>The layout for a git repository for a standalone repository might look something like:</p>
<div class="fragment"><div class="line">mission</div>
<div class="line">├── mission_deployment_1</div>
<div class="line">├── fprime (git submodule to fprime repository)</div>
<div class="line">├── ...</div>
<div class="line">└── library (git submodule to an external library)</div>
</div><!-- fragment --><p>After creating the project layout, an external deployments can also be created by coping the <a class="el" href="namespace_ref.html">Ref</a> application.</p>
<p>After copying the <a class="el" href="namespace_ref.html">Ref</a> app, both in-tree and standalone deployments need to create and modify a <code>settings.ini</code> file in the root of the deployment to set the deployment toolchain, library locations, and for standalone deployments, the location of the F´ framework.</p>
<p>For details on configuring the <code>settings.ini</code> file, see the ../user/settings.md "user guide page".</p>
<h1><a class="anchor" id="autotoc_md170"></a>
Develop Ports and Components</h1>
<p>Next, each developer is typically assigned a set of components to develop. This development starts with the ports that are defined to be used by the component, and then the component itself. This development is described in the following sections.</p>
<h2><a class="anchor" id="autotoc_md171"></a>
Design and Requirements</h2>
<p>Using the high level requirements, the developer should define requirements for an individual component. These requirements should define the behaviors of the component, as well as the interfaces with other components.</p>
<h2><a class="anchor" id="autotoc_md172"></a>
Creating a Port</h2>
<p>Once the interfaces between components have been defined, ports should be created to implement those interfaces.</p>
<p>It's recommended that ports are kept in their own directories separate from components.</p>
<p>To create a new port:</p>
<ol type="1">
<li>If necessary, create new port directory</li>
<li>Create a new port <code>*Ai.xml</code> file, possibly by copying from an existing port.</li>
<li>Add the new port xml file to <code>SOURCE_FILES</code> in the <code>CMakeLists.txt</code> file in the directory</li>
<li>If necessary, add port directory to the deployment's cmake file with <code>add_fprime_subdirectory</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md173"></a>
Creating a Component Definition</h2>
<p>The first step in creating a component is to create the component xml definition, which defines which interfaces it implements, what commands it supports, which telemetry it provides, and what events it produces.</p>
<p>To create a new component definition:</p>
<ol type="1">
<li>Create a new component directory</li>
<li>Create a new component <code>*Ai.xml</code> file, possibly by copying from an existing component.</li>
<li>Optional, create a commands xml file for GDS commands and include it in the component xml file.</li>
<li>Optional, create an events xml file and include it in the component xml file.</li>
<li>Optional, create a telemetry xml for telemetry channels and include it in the component xml file.</li>
<li>Create a component <code>CMakeLists.txt</code> test file and add the component xml file to <code>SOURCE_FILES</code> variable in the file.</li>
<li>Add component directory to the deployment's cmake file with <code>add_fprime_subdirectory</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md174"></a>
Component Implementation</h2>
<p>Next, the developer typically runs <code>fprime-util impl</code> to produce <code>-template</code> files of the hand-coded .cpp and .hpp files. These can be used as a basis for implementation with all the stubs in place for the developer to implement the design. Developers then fill in these files and stubs with an implementation that supports the functionality of the design.</p>
<p>The component can then be built as development proceeds to look for errors. Ports are entirely autogenerated and do not need an implementation.</p>
<h2><a class="anchor" id="autotoc_md175"></a>
Component Unit Testing</h2>
<p>Along with implementation, unit tests can be templated and implemented to test against the requirements of the component. These should be developed an run often to ensure the implemented component works.</p>
<p>To add unit tests to a component:</p>
<ol type="1">
<li>Create a test directory within the component (usually called <code>test</code>).</li>
<li>Run <code>fprime-util impl --ut</code> to generate unit testing code skeleton</li>
<li>Add unit test sources to <code>UT_SOURCE_FILES</code> and register unit tests with <code>register_fprime_ut()</code> in the component <code>CMakeLists.txt</code>.</li>
<li>Run <code>fprime-util check</code> in the component directory to run unit tests.</li>
</ol>
<h1><a class="anchor" id="autotoc_md176"></a>
Assemble Topology</h1>
<p>As components are completed, it is helpful to add them to the topology. As more components are completed, the topology is slowly built up over time. This can enable integration tests early on in the project. The full deployment should be built at this stage to ensure that there are no errors.</p>
<p>To add a component to the topology:</p>
<ol type="1">
<li>In the topology <code>*Ai.xml</code> file<ul>
<li>Import the component <code>*Ai.xml</code> xml file.</li>
<li>Instantiate the component as many time as necessary.</li>
<li>Connect component output ports with the corresponding input port and vice versa.</li>
</ul>
</li>
<li>In the topology <code>Components.hpp</code> file, declare the component with the same name as the topology xml file.</li>
<li>In the topology <code>Topology.cpp</code> file:<ul>
<li>Instantiate the component.</li>
<li>Call the component's <code>init</code> function.</li>
<li>If additional setup is required, call a user defined setup function.</li>
<li>If using commands, register component's commands.</li>
<li>If using health checking, add component to ping entires.</li>
<li>If using an active component, start component with <code>start</code> function and call <code>exit</code> when exiting.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md177"></a>
Integration Testing</h1>
<p>As the topology comes together, it is helpful to write system level tests for subsystems of the overall deployment. This makes sure that as a system, top-level requirements are met.</p>
<p>The fprime-gds has a python API that can be used to write integration test cases, supporting sending commands, checking for events, and getting telemetry channel readings. To get started writing integration test, check out the <a href="../dev/testAPI/user_guide">GDS integration test guide</a>.</p>
<h1><a class="anchor" id="autotoc_md178"></a>
Conclusion</h1>
<p>This guide was an overview of the workflow most F´ developers follow, from the start to completion of a project. These workflows can be applied to any F´ project and should hopefully provide the smoothest development experience. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
