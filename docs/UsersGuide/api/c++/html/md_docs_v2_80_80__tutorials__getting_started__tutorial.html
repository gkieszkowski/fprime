<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: Getting Started with F´</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_v2_80_80__tutorials__getting_started__tutorial.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Getting Started with F´ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Prerequisites: ../../INSTALL.md "INSTALL.md"</p>
<p>This tutorial will walk the user through the basic usage of the F´ development suite. This assumes that the user has run through the above installation guide, and has a working F´ installation.</p>
<p>The goal of this Tutorial is to build familiarity with the F´environment and tools. It does not walk the user through creation of new F´ items, but rather users the existing F´ <code><a class="el" href="namespace_ref.html">Ref</a></code> example as a place to operate the tools, learn the environment, and learn F´.</p>
<p>The full development process is covered in the ../MathComponent/Tutorial.md "Math Component Tutorial", which will build on the knowledge learned here.</p>
<h1><a class="anchor" id="autotoc_md703"></a>
Tutorial Goals</h1>
<p>The goal of this tutorial is to demonstrate the F´ tool suite as it applies to the F´ development process. Users will first gain some understanding of F´ terminology followed by the F´ development process. Then they will use the tools to walk the F´ development process steps against existing reference goals.</p>
<h1><a class="anchor" id="autotoc_md704"></a>
F´ Terminology</h1>
<p>This section will cover basic terminology used in this and other tutorial with respect to F´. It may be used as a reference for keywords that have specific meaning in an F´ project.</p>
<p><b>Port:</b> a port represents a connection between <em>Components</em>. These act as communication channels in F´. This allows <em>Components</em> to interact with each other. A set of <em>Ports</em> acts as a defined interface to a <em>Component</em>.</p>
<p><b>Component:</b> the location of program behavior. Components execute the software logic of the system and typically define an interface of <em>Ports</em> that act allow them to interact with other <em>Components</em>. Components additionally may define <em>Commands</em>, <em>Events</em>, <em>Channels</em>, and <em>Parameters</em>, which define standard data patterns in F´.</p>
<p><b>Topology</b>: a topology represents the full F´ system. It is a set of <em>Components</em> and the connections between those <em>Components</em>. The <em>Topology</em> specifies the full system and all the communication channels.</p>
<p><b>Event:</b> an event, also known as an EVR, is a type of downlinked data that represents a single event in the system. An event is composed of a name, format string, and set of arguments that described what happened. Events represent a history of the system. Events are defined per-*component*.</p>
<p><b>Channel:</b> a channel, also known as a telemetry item, is a single value read and downlinked. Channels are consist of a type, a format specifier, and a value. Channels represent current system state. Channels are defined per-*component*.</p>
<p><b>Command:</b> a command is uplinked data items that instructs the system to perform an action. <em>Commands</em> consist of an opcode, a mnemonic, and a list of arguments to the command. Commands are defined per-*component*.</p>
<p><b>Deployment:</b> a deployment is a single instance of F´. Although a single F´ project can use/define multiple deployments, a deployment represents one build/executable.</p>
<p><b>Build Directory/Build Cache:</b> this directory, created by the <code>fprime-util</code> described below, is required to build CMake projects. It stores all by-products, generated code, and build products from an F´ build.</p>
<p><b>Ground System:</b> the computer system running to collect the data from the running F´ deployment. There is a basic ground system supplied with F´ for development purposes.</p>
<p><b>Toolchain:</b> a set of build tools to build for a specific architecture. i.e. the "raspberrypi" toolchain will build F´ deployments for the arm/Linux architecture of the raspberry pi.</p>
<h1><a class="anchor" id="autotoc_md705"></a>
F´ Development Process</h1>
<p>F´ development typically starts with creating new Ports and Components as these can be built and tested as units and then the full F´ system deployment topology can be assembled for integrated systems testing and release/operations. This can be done iteratively by creating a few Components then integrating them into the system topology and then repeating with the next most critical components.</p>
<p>F´ development is a design-first approach. To start, a developer should design any unique ports that the Component will need. If desired, the port can be built and compiled to ensure that the design is correct. Since the port will be entirely auto-generated, developers usually refrain from unit testing the port and defer unit testing to the Component.</p>
<p>Next, developers design components. Components are designed by specifying the ports that represent the Component's interface and the Commands, Events and Channels that the Component handles. This tutorial focuses on the tool suite, so the design is already in-place. Users can see the design by inspecting Components in the <code><a class="el" href="namespace_ref.html">Ref</a></code> directory. Creation of new components from design through test is demonstrated in the ../MathComponent/Tutorial.md "Math Component Tutorial".</p>
<p>The next step for developing a Component is to implement the code. To do this, one can generate template stubs to fill with the developer's stubs. To do this, a user runs the F´ tool suite to generate these stubs. Then implements, builds, and tests from there. Unit tests template stubs are generated in the same way, and should test-driven development be preferred, these tests stubs could be generated and implemented before the Component's code.</p>
<p>Finally, the Component is integrated into the deployment and the entire deployment may be built and installed.</p>
<p>This tutorial will walk developers through generating the templates, building example Components, and building/installing the full deployment. It will use the <code><a class="el" href="namespace_ref.html">Ref</a></code> application as an example for this.</p>
<h1><a class="anchor" id="autotoc_md706"></a>
Working the F´ Development Process with &lt;tt&gt;fprime-util&lt;/tt&gt;</h1>
<p>In order to ease in development, the F´ team has created a small wrapper for the CMake build system. This will recover the advantages of previous F´ development patterns, while allowing for the power and configurability of CMake as an underlying build tool.</p>
<h2><a class="anchor" id="autotoc_md707"></a>
Build Cache Generation</h2>
<p>In order to run CMake, a build cache needs to be generated. This is typically done once for each platform the user wishes to compile against. It is usually done right after F´ is checked-out and repeated for each platform as they are added. It is a setup step and isn't formally part of the F´ development process.</p>
<p>To run this tool, the developer will use the <code>generate</code> subcommand. It takes one optional argument: the toolchain file used in CMake to compile for a specific platform. If not supplied, the <code>native</code> toolchain will be used and F´ will be setup to run on the current platform (typically Mac OS, or Linux depending on the developer's chosen OS).</p>
<p><b>Generate the <a class="el" href="namespace_ref.html">Ref</a> Application for Native Compilation</b></p>
<p>To generate a native build, follow the commands shown below. It is assumed that the user has checked out the fprime repository and is performing commands relative to the location of that checkout.</p>
<div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util generate</div>
</div><!-- fragment --><p>Here the utility will create two standard builds: one for the standard build, and one for the unit test build. This will enable the user to take advantage of all parts of F´ without generating their own CMake build caches. <b>Note:</b> should a developer be developing or improving F´ provided infrastructure components, then the <code>generate</code> command should be run in the F´ root directory. However, most developers do not need this functionality.</p>
<p><b>Generate Cross-Compile of the <a class="el" href="namespace_ref.html">Ref</a> Application for Raspberry PI Platform</b></p>
<p>Most developers wish to run F´ on embedded hardware. This is done by generating a cross-compile using a different CMake toolchain by providing the toolchain argument. The above invocations assume the default "native" toolchain.</p>
<p>Here, the "raspberrypi" toolchain supplied by F´ is used. This will generate a cross-compile for the raspberry pi architecture. The user should ensure to follow the Raspberry PI setup steps found at: <a href="https://github.com/nasa/fprime/blob/master/RPI/README.md">RPI</a> </p><div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util generate raspberrypi</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md708"></a>
Creating Implementation Stubs</h1>
<p>Once the build system cache is generated, developers will need to generate the stubbed implementations of a Component's C++ files. This can be done using the <code>impl</code> command of the F´ utility. These commands assume a default build has been generated. Typically passing in a toolchain is unnecessary as these templates are platform agnostic.</p>
<p><b>Generating Implementation Stubs of SignalGen</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util impl</div>
</div><!-- fragment --><p>This creates two files for the component. These are <code>&lt;Component&gt;Impl.cpp-template</code> and <code>&lt;Component&gt;Impl.hpp-template</code>. The user can then rename these files to remove <code>-template</code>. The file is then ready for C++ development. By generating <code>-template</code> files, we won't accidentally overwrite any existing implementation should the developer need to repeat this step.</p>
<h1><a class="anchor" id="autotoc_md709"></a>
Creating Unit Test Implementations</h1>
<p>Once the build system cache is generated, developers will need to generate the stubbed implementations for creating unit tests for a Component's C++. This can be done using the <code>impl --ut</code> command of the F´ utility. These commands assume a default build has been generated. They can be run passing in a toolchain, but this is typically not done because they are toolchain agnostic.</p>
<p><b>Generating Unit Test Stubs of SignalGen</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util impl --ut</div>
</div><!-- fragment --><p>This creates the following files, that are typically moved to a sub folder called <code>test/ut</code>. The files created are placed in the current directory and named: </p><div class="fragment"><div class="line">Tester.cpp</div>
<div class="line">Tester.hpp</div>
<div class="line">GTestBase.cpp</div>
<div class="line">GTestBase.hpp</div>
<div class="line">TesterBase.cpp</div>
<div class="line">TesterBase.hpp</div>
<div class="line">TestMain.cpp</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md710"></a>
Building Components and Deployments</h2>
<p>Once a developer has implemented a component, it is time to build that component and test that component. In order to build a component the <code>build</code> subcommand needs to be run. This will build the "current directory" that the developer is in. That means that should the user change into a deployment directory then the build command will build the full deployment. Should the user desire to build a component, navigate into the Component's directory and run the build command.</p>
<p><b>Build SignalGen Component</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util build</div>
</div><!-- fragment --><p>The user can also build a deployment by navigating to the deployment directory and running the <code>build</code> command. This is shown below:</p>
<p><b>Build <a class="el" href="namespace_ref.html">Ref</a> Deployment</b> </p><div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util build</div>
</div><!-- fragment --><p><b>Note:</b> the user almost always wants to run the "install" command on deployments. This builds the binary like "build" but also copies the binary to the deployments "bin" directory, i.e. <code>fprime/Ref/bin</code>. Install is described below.</p>
<p>This process also built the Dictionaries for the project and places the dictionary in the "Top" folder of the deployment. This happens any time the "install" or "build" command are run on a deployment.</p>
<p>The user can also build a component or deployment for a cross-compile by specifying the toolchain. A previous generate for that toolchain should have been run. Again for deployments, the user typically should run "install", see below. These steps require the setup described here: <a href="https://github.com/nasa/fprime/blob/master/RPI/README.md">RPI</a></p>
<div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util build raspberrypi</div>
<div class="line">cd fprime/Ref</div>
<div class="line">fprime-util build raspberrypi</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md711"></a>
Installing the F´ Executable and Dictionaries</h1>
<p>Once the deployment is built, it would be nice to be able to install the binary and dictionaries. This will enable the users to quickly find and run the deployment. This installation can be run using the following command. Everything will be installed to the directory defining the deployment. i.e. <code>fprime/Ref/bin</code>. Install will also invoke <code>build</code> so users should use this in-place of build for deployments.</p>
<p><b>Installing the <a class="el" href="namespace_ref.html">Ref</a> Deployment and Running the Binary Assuming Linux</b> </p><div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util build</div>
<div class="line">./bin/Linux/Ref # Run the deployment</div>
<div class="line">CTRL-C # Exit the application</div>
</div><!-- fragment --><p>Running the application as part of the development ground data system is shown below.</p>
<p>The user can also install a cross-compile. </p><div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util build raspberrypi</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md712"></a>
Building and Running Unit Tests</h1>
<p>Unit tests can be build using the the <code>build --ut</code> command of the <code>fprime-util</code>. This will allow us to build the unit tests in preparation to run them. The user can also just run <code>check</code> to build and run the unit tests.</p>
<p>Before building unit tests, the unit test build cache must be generated:</p>
<div class="fragment"><div class="line">cd fprime/Ref</div>
<div class="line">fprime-util generate --ut</div>
</div><!-- fragment --><p><b>Building Unit Test of SignalGen</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util build --ut</div>
</div><!-- fragment --><p>Once built, the unit test can be run using the following command. <b>Note: this will produce a message warning of no tests run because SigGen has no unit tests defined.</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util check</div>
</div><!-- fragment --><p>The user can also build the unit test, but must copy it to the hardware and run it here. This can be done with a cross- compile by running the following commands.</p>
<p><b>Cross-Compile Unit Test of SignalGen</b> </p><div class="fragment"><div class="line">cd fprime/Ref/SignalGen</div>
<div class="line">fprime-util build raspberrypi --ut</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md713"></a>
Conclusion</h1>
<p>The user should now be familiar with F´ terminology and with the <code>fprime-util</code> tool used to build and develop F´ applications. The next step is to follow the full <code>MathComponent</code> tutorial to create new <em>Ports</em>, <em>Components</em>, and <em>Topologies</em>. This will walk the user through the entire development process, using the tool commands we learned here.</p>
<p><b>Next:</b> ../MathComponent/Tutorial.md "Math Component Tutorial" <b>Also See:</b> ../GpsTutorial/Tutorial.md "GPS Component Tutorial" for a cross-compiling tutorial. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
