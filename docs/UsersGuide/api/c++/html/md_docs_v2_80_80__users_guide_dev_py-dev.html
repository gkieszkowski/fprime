<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F´ Flight Software - C/C++ Documentation: F´ Python Guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">F´ Flight Software - C/C++ Documentation
   &#160;<span id="projectnumber">NASA-v1.6.0</span>
   </div>
   <div id="projectbrief">A framework for building embedded system applications to NASA flight quality standards.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_v2_80_80__users_guide_dev_py-dev.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">F´ Python Guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This guide describes the guidelines for developing Python code to be used with F´. This is done when contributing to the F´ Python code and is recommended for project Python code as well.</p>
<h1><a class="anchor" id="autotoc_md972"></a>
Required Development Installs</h1>
<p>Setup the virtual environment per the install guide using the small additions below to get the packages F´ uses to facilitate Python development.</p>
<div class="fragment"><div class="line">pip install -e fprime/Fw/Python[dev]</div>
<div class="line">pip install -e fprime/Gds/</div>
</div><!-- fragment --><p>After you have installed the python packages you need to set up pre-commit hooks using the following command. This ensures that for each commit, checks are performed before the developer commits the code.</p>
<div class="fragment"><div class="line">pre-commit install</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md973"></a>
Unit Tests</h1>
<p>Probably one of the most important parts of developing code is to ensure Python unit tests pass. We use pytest:</p>
<div class="fragment"><div class="line">cd fprime/Fw/Python/</div>
<div class="line">pytest</div>
</div><!-- fragment --><div class="fragment"><div class="line">cd fprime/Gds/</div>
<div class="line">pytest</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md974"></a>
When and How to Format Your Code</h1>
<p>Everyone has their own habits and style when writing code. We are asking you to change your habits, but this is made easy through the use of a code formatter. This ensures your code is consistent with F´ so that reviewers and collaborators can more quickly comprehend what the code is doing. This can easily be done executing the <code>black</code> formatter right before you commit and push your code.</p>
<p>Here is how to run black:</p>
<div class="fragment"><div class="line"># format a single file</div>
<div class="line">black example-file.py</div>
<div class="line"># format an entire folder and subfolders</div>
<div class="line">black path/to/folder/</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md975"></a>
Git Pre-commit hooks</h2>
<p>If you followed the Development Install Instructions above you will have automatically set up pre-commit hooks. These will run automatically whenever you commit your code. Currently the only pre-commit hook we have is <code>black</code>. Black automatically formats your python code so that it is consistent with the rest of the F´ python code.</p>
<div class="fragment"><div class="line">$ git commit -m &quot;Add new python code&quot;</div>
<div class="line">Format Python Code (black)...............................................Passed</div>
<div class="line">[master 3415f7dd] Add new python code</div>
<div class="line"> 1 file changed, 30 insertions(+)</div>
</div><!-- fragment --><p>If black finds unformatted code the commit will fail, meaning that you will have to stage the formatted changes and run the commit again. If for some reason black's formatting introduces a bug into your code you can optionally skip the pre-commit hook by modifying the 'SKIP' environment variable in bash. For example:</p>
<div class="fragment"><div class="line">SKIP=black git commit -m &quot;foo&quot;</div>
</div><!-- fragment --><p>However this should only be used in an emergency. If SKIP is used for all of your commits it will dramatically reduce code quality over time.</p>
<h2><a class="anchor" id="autotoc_md976"></a>
Why did we choose black</h2>
<p>Black is an opinionated formatter that will format your code without any configuration or input from the programmer. Why did we choose an “opinionated” formatter? In short, convention is so much more efficient than configuration. With convention, everyone just does what is dictated (in this case from the tool) and there is no room for choice, which causes entropy in the project (e.g. one developer chooses spaces, another chooses tabs, and chaos results). As entropy increases, the code is harder to understand automated tooling stifled, and development becomes more difficult. Hence, projects select coding styles, standards, best practices, etc. as a way to reduce entropy. By accepting an established opinion, we can gain the advantages of a well-ordered project via a tool. Assuming the opinions of the tool are not too onerous, we’ll have a better project as a result. Be like the Borg and just assimilate...</p>
<h1><a class="anchor" id="autotoc_md977"></a>
Static Analysis</h1>
<p>While almost all projects require unit tests, not enough them consistently use static analysis to improve code quality. With a few simple commands static analysis will drastically reduce time wasted with simple errors or issues and increase the lifecycle of your code.</p>
<p>F uses Pylama to perform static analysis on our python code. Pylama contains pylint, pyflakes, pycodestyle(pep8), mccabe, pydocstyle, radon, gjslint, eradicate, and Mypy. Combining the output from the tools that you want into a single file.</p>
<div class="fragment"><div class="line"># How to run pylama</div>
<div class="line">pylama -o path/to/fprime/pylama/setup.cfg path/to/directory/you/want/to/analyze/</div>
<div class="line"># the &#39;-o&#39; specifies the configuration file</div>
</div><!-- fragment --><p>Pylama can be configured within the setup.cfg file. This file can also go in the directory you are analyzing if you wan a different configuration for the python files in that directory. Inside the configuration file you can configure both pylama as a whole and each of tools individually.</p>
<p>The recommended F´ pylama config is at: Fw/Python/pylama.cfg </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
